---
import ThemeToggle from "./ThemeToggle.astro";
import { withBase } from "../utils/paths";

const links = [
  { href: withBase("/#concepts"), label: "核心概念" },
  { href: withBase("/#text-to-image"), label: "文生图实战" },
  { href: withBase("/#workflow-reuse"), label: "工作流复用" },
  { href: withBase("/#downloads"), label: "配套资源" }
];
---
<nav class="flex items-center gap-4 text-sm font-medium">
  <ul class="hidden items-center gap-4 sm:flex">
    {links.map((link) => (
      <li>
        <a class="rounded-md px-2 py-1 text-slate-600 transition hover:bg-primary/10 hover:text-primary dark:text-slate-300" href={link.href}>
          {link.label}
        </a>
      </li>
    ))}
  </ul>
  <ThemeToggle />
  <details data-mobile-nav class="relative sm:hidden">
    <summary class="flex h-9 w-9 cursor-pointer items-center justify-center rounded-full border border-slate-300 text-slate-600 transition hover:border-primary hover:text-primary dark:border-slate-600 dark:text-slate-200">
      <span class="sr-only">展开导航菜单</span>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 5.25h16.5M3.75 12h16.5m-16.5 6.75h16.5" />
      </svg>
    </summary>
    <ul class="absolute right-0 top-11 w-48 space-y-1 rounded-xl border border-slate-200 bg-white p-3 text-sm text-slate-700 shadow-lg dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200">
      {links.map((link) => (
        <li>
          <a class="block rounded-lg px-3 py-2 hover:bg-primary/10 hover:text-primary" href={link.href}>{link.label}</a>
        </li>
      ))}
    </ul>
  </details>
  <script is:inline>
    const mobileNav = document.querySelector("details[data-mobile-nav]");
    mobileNav?.querySelectorAll("a").forEach((anchor) =>
      anchor.addEventListener("click", () => mobileNav.removeAttribute("open"))
    );
  </script>
</nav>
